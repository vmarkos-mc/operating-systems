# Semaphore Example

Assume we have 4 processes, P1, P2, P3, P4, and we allow simultaneous access to
**at most 2** of them to a shared resource.

As a reminder:

```
// P Operation
if (semaphore == 0):
    block;
if (semaphore > 0):
    semaphore--;
```

```
// V Operation
semaphore++;
```

*Below '>' denotes that the operation following is being executed. Also, 'CS' denotes the Critical Section.*

| ------|-------|-------|-------|-----------|
| P1    | P2    | P3    | P4    | Semaphore |
| P     | P     | P     | P     | 2         |
| >P    | P     | P     | P     | 1         |
| CS    | P     | >P    | P     | 0         |
| CS    | >P    | CS    | P     | 0         |
| CS    | block | CS    | >P    | 0         |
| CS    | block | CS    | block | 0         |
| CS    | block | >V    | block | 1         |
| CS    | block |       | >P    | 0         |
| >V    | block |       | CS    | 1         |
|       | >P    |       | CS    | 0         |
|       | CS    |       | CS    | 0         |
|       | CS    |       | >V    | 1         |
|       | >V    |       |       | 2         |
| ------|-------|-------|-------|-----------|